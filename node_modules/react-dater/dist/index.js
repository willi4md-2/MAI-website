function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var t=require("react"),a=e(t),n=e(require("prop-types")),r=e(require("classnames")),o=e(require("react-onclickoutside")),s=e(require("date-fns/format")),i=e(require("date-fns/startOfDay")),l=e(require("date-fns/startOfWeek")),c=e(require("date-fns/startOfMonth")),d=e(require("date-fns/addDays")),u=e(require("date-fns/addWeeks")),p=e(require("date-fns/addMonths")),f=e(require("date-fns/addYears")),m=e(require("date-fns/subMonths")),v=e(require("date-fns/subYears")),D=e(require("date-fns/setHours")),h=e(require("date-fns/setMinutes")),y=e(require("date-fns/parse")),_=e(require("date-fns/parseISO")),g=e(require("date-fns/toDate")),w=e(require("date-fns/isValid")),S=e(require("date-fns/getHours")),C=e(require("date-fns/getMinutes")),E=e(require("date-fns/getDate")),x=e(require("date-fns/isSameDay")),O=e(require("date-fns/isSameMonth")),T=e(require("date-fns/isBefore")),k=e(require("date-fns/differenceInCalendarYears")),b=e(require("date-fns/differenceInCalendarMonths")),R=e(require("date-fns/differenceInCalendarDays")),N=e(require("date-fns/isWithinInterval")),q=e(require("date-fns/endOfDay")),M=require("date-fns/locale"),I=e(require("date-fns/addMinutes")),H=e(require("@material-ui/icons/esm/CalendarToday")),F=e(require("@material-ui/icons/esm/AccessTime")),V=require("react-popper"),Y=require("@popperjs/core/lib/enums");function P(){return(P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function B(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var L=function(e){return a.createElement("div",{className:e.className},e.children)},j=function(){return"undefined"!=typeof window?window:global},W=function(e){var t=e?"string"==typeof e||e instanceof String?_(e):g(e):new Date;return w(t)?t:new Date},A=function(e,t,a){void 0===t&&(t="yyyy-MM-dd");var n=z(a);return w(e)?s(e,t,{locale:n}):null},U=function(e,t,a){var n=z(a),r=y(e,t,new Date,{locale:n});return w(r)?r:null},X=function(e,t){var a=z(t);return l(e,{locale:a})},z=function(e){if(!e)return G();if("string"==typeof e){var t=j();return t.__localeData__&&t.__localeData__[e]?t.__localeData__[e]:G()}return e},G=function(){return j().__default_locale__||M.enUS},J=function(e,t){var a=t.hour,n=void 0===a?0:a,r=t.min;return D(h(e,void 0===r?0:r),n)};function K(e,t){return R(e,t)>0?[t,e]:[e,t]}function Q(e,t,a){var n,r=K(t,a),o=r[0],s=r[1];try{n=N(e,{start:i(o),end:q(s)})}catch(e){n=!1}return n}var Z=function(e,t){return!(!e||!t)&&x(e,t)},$=a.createContext();function ee(e,t){return function(n){var r=t();return a.createElement(e,P({},r,n))}}var te=a.memo(function(e){var t=e.day,n=e.viewed,o=e.hoveringDate,s=e.onDaySelect,i=e.onDayHover,l=e.startDate,c=e.endDate;return a.createElement("div",{className:r("rdx__day",{"rdx__day--selected":!e.selectDateRange&&Z(t,e.selected),"rdx__day--range-start":!!l&&Z(l,t),"rdx__day--range-end":!!c&&Z(c,t),"rdx__day--in-range":function(){if(o){if(l&&!c)return Q(t,o,l);if(!l&&c)return Q(t,o,c)}else if(l&&c)return Q(t,l,c);return!1}(),"rdx__day--out-month":!O(t,n)}),onClick:function(e){s(t,e)},onMouseEnter:function(){i(t)}},E(t))});te.propTypes={day:n.instanceOf(Date),viewed:n.instanceOf(Date),selected:n.instanceOf(Date),onDaySelect:n.func};var ae=ee(te,function(){var e=t.useContext($);return{minDate:e.minDate,selected:e.selected,viewed:e.viewed,hoveringDate:e.hoveringDate,onDaySelect:e.onDaySelect,onDayHover:e.onDayHover,startDate:e.startDate,endDate:e.endDate,selectDateRange:e.selectDateRange}}),ne=[0,1,2,3,4,5,6],re=function(e){return a.createElement("div",{className:"rdx__week"},function(e){var t=X(e);return[].concat(ne.map(function(e){var n=d(t,e);return a.createElement(ae,{key:e,day:n})}))}(e.day))};re.propTypes={day:n.instanceOf(Date).isRequired};var oe=function(e){return a.createElement("div",{className:"rdx__month"},function(e){var t,n=e.day,r=[],o=X(c(n));for(t=0;t<5;t++)r.push(a.createElement(re,{weekNumber:t,key:"rdx-week-"+t,day:o})),o=u(o,1);return O(o,n)&&r.push(a.createElement(re,{weekNumber:t,key:"rdx-week-"+t,day:o})),r}(e))};oe.propTypes={day:n.instanceOf(Date).isRequired};var se=a.memo(oe,function(e,t){return!!O(e.day,t.day)});function ie(e,t){return window.getComputedStyle?window.getComputedStyle(e)[t]:e.currentStyle[t]}function le(e){if(!e)return 0;var t=parseInt(ie(e,"marginTop")),a=parseInt(ie(e,"marginBottom"));return e.clientHeight+t+a}var ce=ee(a.memo(function(e){var n=e.format,o=e.intervals,s=e.locale,l=e.onTimeSelect,c=e.setTimeLayerOpen,d=e.header,u=e.container,p=e.selected||W(),f=S(p),m=C(p),v=o||30,D=n||"HH:mm aa",h=t.useRef(),y=t.useRef();t.useEffect(function(){var e=le(h.current),t=le(d.current);y.current.scrollTop=h.current.offsetTop-(u.current.clientHeight-t-e)/2},[h.current]);var _=function(e){l(e),c(!0)},g=function(e){return f===S(e)&&m===C(e)},w=function(e){return r("rdx__timeListItem",{"rdx__timeListItem--selected":g(e)})};return a.createElement("div",{ref:y,className:"rdx__timeDisplayWrapper"},function(){for(var e=[],t=i(p),n=1440/v,r=0;r<n;r++){var o=I(t,r*v);e.push(o)}return e.map(function(e,t){return function(e){var t=m-C(e);return f===S(e)&&t<v&&t>=0}(e)?a.createElement("li",{key:t,onClick:function(){return _(e)},className:w(e),ref:h},A(e,D,s)):a.createElement("li",{key:t,onClick:function(){return _(e)},className:w(e)},A(e,D,s))})}())}),function(){var e=t.useContext($);return{locale:e.locale,selected:e.selected,onTimeSelect:e.onTimeSelect}}),de={root:"rdx__timeToggleIcon"},ue=function(e){function t(t){var n;return(n=e.call(this,t)||this).handleClickOutside=function(e){n.setState({timeCollapse:!0}),n.props.onClickOutside(e)},n.setTimeLayerOpen=function(e){n.setState({timeCollapse:e})},n.getDateInView=function(){var e=n.props;return e.viewed||e.selected||W()},n.decreaseMonth=function(){n.props.onChangeView(m(n.props.viewed,1))},n.increaseMonth=function(){n.props.onChangeView(p(n.props.viewed,1))},n.decreaseYear=function(){n.props.onChangeView(v(n.props.viewed,1))},n.increaseYear=function(){n.props.onChangeView(f(n.props.viewed,1))},n.renderCurrentMonthYear=function(e){void 0===e&&(e=n.getDateInView());var t=n.context.locale;return a.createElement("div",{className:r("rdx__current-headerInfo")},n.renderPreviousButton(),n.renderNextButton(),A(e,n.props.dateFormat,t))},n.renderCurrentMonthYearSparate=function(e){void 0===e&&(e=n.getDateInView());var t=n.context.locale;return a.createElement("div",{className:r("rdx__current-headerInfo")},a.createElement("div",{className:"rdx__month-info"},n.renderPreviousButton("MONTH"),n.renderNextButton("MONTH"),A(e,"LLL",t)),a.createElement("div",{className:"rdx__year-info"},n.renderPreviousButton("YEAR"),n.renderNextButton("YEAR"),A(e,"yyyy",t)))},n.renderWeekdayHeader=function(e){void 0===e&&(e=n.getDateInView());var t=n.context.locale,o=X(e,t),s=[];return s=s.concat([0,1,2,3,4,5,6].map(function(e){var n=function(e,t){return A(e,"EEEEEE",t)}(d(o,e),t);return a.createElement("div",{key:e,className:r("rdx__weekday-name")},n)})),a.createElement("div",{className:"rdx__weekdayname-header"},s)},n.renderDefaultHeader=function(e){var t=e.monthDate;return a.createElement("div",{className:"rdx__header rdx__header--default"},n.renderCurrentMonthYear(t),n.renderWeekdayHeader(t))},n.renderSeparateMonthYearHeader=function(e){var t=e.monthDate;return a.createElement("div",{className:"rdx__header rdx__header--separate"},n.renderCurrentMonthYearSparate(t),n.renderWeekdayHeader(t))},n.renderHeader=function(e){var t=e.monthDate;return n.props.showMonthYearSeparate?n.renderSeparateMonthYearHeader({monthDate:t}):n.renderDefaultHeader({monthDate:t})},n.renderMonths=function(){var e=n.getDateInView();return a.createElement("div",{className:"rdx__month-container",key:"month-0"},n.renderHeader({monthDate:e}),a.createElement(se,{day:e}))},n.renderPreviousButton=function(e){void 0===e&&(e="MONTH");var t,o,s,i,l="NEXT "+e,c=!0;switch(e){case"MONTH":t=n.decreaseMonth,s=(void 0===(o=n.props)?{}:o).minDate,i=m(n.props.viewed,1),c=s&&b(s,i)>0;break;case"YEAR":t=n.decreaseYear,c=function(e,t){var a=(void 0===t?{}:t).minDate,n=v(e,1);return a&&k(a,n)>0}(n.props.viewed,n.props);break;default:t=function(){}}if(!c)return a.createElement("button",{type:"button",className:r("rdx__navigation","rdx__navigation--previous"),"aria-label":l,onClick:t},"PREVIOUS "+e)},n.renderNextButton=function(e){void 0===e&&(e="MONTH");var t,o,s,i,l="NEXT "+e,c=!0;switch(e){case"MONTH":t=n.increaseMonth,s=(void 0===(o=n.props)?{}:o).maxDate,i=p(n.props.viewed,1),c=s&&b(i,s)>0;break;case"YEAR":t=n.increaseYear,c=function(e,t){var a=(void 0===t?{}:t).maxDate,n=f(e,1);return a&&k(n,a)>0}(n.props.viewed,n.props);break;default:t=function(){}}if(!c)return a.createElement("button",{type:"button",className:r("rdx__navigation","rdx__navigation--next"),"aria-label":l,onClick:t},l)},n.renderFooter=function(){var e=n.state.timeCollapse;return a.createElement("div",{className:"rdx__time-footer","data-collapse":n.state.timeCollapse},a.createElement("div",{className:"rdx__timeToggleWrapper",onClick:function(){return n.setTimeLayerOpen(!e)},ref:n.headRef},a.createElement(e?F:H,{classes:de})),a.createElement(ce,{header:n.headRef,container:n.containerRef,format:n.props.timeFormat,intervals:n.props.intervals,setTimeLayerOpen:n.setTimeLayerOpen}))},n.state={timeCollapse:!0},n.containerRef=a.createRef(),n.headRef=a.createRef(),n}return B(t,e),t.prototype.render=function(){return a.createElement("div",{ref:this.containerRef},a.createElement(L,{className:r("rdx",{"rdx--select-time":this.props.selectTime})},this.renderMonths(),this.props.children,this.props.selectTime&&this.renderFooter()))},t}(t.Component);ue.propTypes={intervals:n.number,dateFormat:n.string.isRequired,timeFormat:n.string,selected:n.instanceOf(Date),viewed:n.instanceOf(Date),showMonthYearSeparate:n.bool,selectTime:n.bool,selectDateRange:n.bool,selectTimeRange:n.bool,minDate:n.instanceOf(Date),maxDate:n.instanceOf(Date)},ue.contextType=$;var pe=function(e){var n,o=e.hidePopper,s=e.popperComponent,i=e.popperPlacement,l=e.targetComponent,c=t.useState(null),d=c[0],u=c[1],p=t.useState(null),f=p[0],m=p[1],v=t.useState(null),D=v[1],h=V.usePopper(d,f,{modifiers:[{name:"arrow",options:{element:v[0]}},{name:"offset",options:{offset:[0,10]}}],placement:i}),y=h.styles,_=h.attributes;return n=a.createElement("div",P({className:r("rdx__popper"),ref:m,style:y.popper},_.popper,{"data-popper-reference-hidden":o}),a.cloneElement(s,{},a.createElement("div",{className:"rdx__arrow",ref:D}))),a.createElement(a.Fragment,null,a.createElement("div",{className:"rdx__display-wrapper",ref:u},l),n)};pe.propTypes={hidePopper:n.bool,popperComponent:n.element,popperModifiers:n.object,popperPlacement:n.oneOf(Y.placements),popperContainer:n.func,popperProps:n.object,targetComponent:n.element},pe.defaultProps={hidePopper:!1,popperProps:{},popperPlacement:"bottom-start"};var fe=o(ue),me=function(e){function t(t){var n;return(n=e.call(this,t)||this).getInitialState=function(){var e=n.props,t=e.minDate,a=e.maxDate,r=e.selectDateRange,o=e.startDate,s=e.endDate,i=e.selected||W(),l=o||null,c=s||null;return r&&(i=l||c||i),n.props.skipOverflowCheck||(t&&T(i,t)?i=t:a&&T(a,i)&&(i=a)),{open:!1,inputValue:null,focused:!1,selectState:l?1:c?2:0,selectedDate:i,viewDate:i,selectedDateStart:l,selectedDateEnd:c,hoveringDate:null}},n.getResetView=function(){if(n.props.selectDateRange){var e=n.state;return e.selectedDateStart||e.selectedDateEnd||e.viewDate}return n.state.selectedDate},n.clearTimer=function(){"number"==typeof n.inputTimeout&&(window.clearTimeout(n.inputTimeout),n.inputTimeout=null)},n.isCalendarOpen=function(){return n.state.open&&!n.props.disabled&&!n.props.readOnly},n.setOpen=function(e,t,a){n.setState(function(n){var r={open:e};return t?P(P({},r),{},{viewDate:a}):r})},n.setSelected=function(e,t,a){var r=n.state.selectedDate,o=e;n.props.selectTime&&a||(o=J(o,{hour:S(r),min:C(r)})),n.setState({selectedDate:o,viewDate:o}),a||n.setState({inputValue:null}),n.props.onChange(o,t)},n.setRangeSelected=function(e,t,a){var r=void 0===e?{}:e,o=r.start,s=r.end,i={selectState:0,selectedDateStart:o||n.state.selectedDateStart,selectedDateEnd:s||n.state.selectedDateEnd};if(a){if(o&&s){var l=K(o,s);i.selectedDateStart=l[0],i.selectedDateEnd=l[1],i.inputValue=null}}else if(i.inputValue=null,0===n.state.selectState)i.selectState=1,null!==n.state.selectedDateStart&&(i.selectedDateEnd=null);else{var c=K(i.selectedDateStart,i.selectedDateEnd);i.selectedDateStart=c[0],i.selectedDateEnd=c[1],i.viewDate=i.selectedDateStart}0===i.selectState&&(i.hoveringDate=null),n.setState(i)},n.setViewDate=function(e){n.setState({viewDate:e})},n.handleInputClick=function(){n.props.disabled||n.props.readOnly||n.setOpen(!0)},n.handleFocus=function(e){},n.handleBlur=function(){},n.inputChangeCallBack=function(e){var t,a=n.props,r=a.dateFormatInput,o=a.locale,s=e.target.value;if(n.props.selectDateRange){var i=s.split("to").map(function(e){return e.trim()}),l=i[1],c=U(i[0],r,o),d=U(l,r,o);n.setRangeSelected({start:c,end:d},e,!0)}else(t=U(s,r,o))&&n.setSelected(t,e,!0)},n.handleInputChange=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];var r=t[0].nativeEvent;n.clearTimer(),n.inputTimeout=window.setTimeout(n.inputChangeCallBack,2e3,r),n.setState({inputValue:r.target.value})},n.handleSelect=function(e,t){var a=n.state.selectState,r=n.props.selectDateRange;if(n.clearTimer(),r)switch(a){case 0:n.setRangeSelected({start:e},t,!1);break;case 1:n.setOpen(!1,!1),n.setRangeSelected({end:e},t,!1);break;case 2:n.setOpen(!1,!1),n.setRangeSelected({start:e},t,!1)}else n.setOpen(!1,!1),n.setSelected(e,t,!1)},n.handleDayHover=function(e){0!==n.state.selectState&&n.setState({hoveringDate:e})},n.handleTimeSelect=function(e){var t=J(n.state.selectedDate,{hour:S(e),min:C(e)});n.setState({selectedDate:t,inputValue:null})},n.handleCalendarClickOutside=function(e){if(e.target!==n.input){var t;if(n.props.selectDateRange){var a=n.state;t=a.selectedDateStart||a.selectedDateEnd||a.viewDate}else t=n.state.selectedDate;n.setOpen(!1,!0,t)}},n.getDateRangeFormat=function(){var e=n.props,t=e.dateFormatInput,a=e.locale,r=n.state,o=r.selectedDateEnd;return(A(r.selectedDateStart,t,a)||"...")+" to "+(A(o,t,a)||"...")},n.renderCalendar=function(){return a.createElement(fe,{intervals:n.props.intervals,dateFormat:n.props.dateFormatCalendar,onClickOutside:n.handleCalendarClickOutside,selected:n.state.selectedDate,viewed:n.state.viewDate,onChangeView:n.setViewDate,showMonthYearSeparate:n.props.showMonthYearSeparate,selectTime:n.props.selectTime,selectDateRange:n.props.selectDateRange,selectTimeRange:n.props.selectTimeRange,minDate:n.props.minDate,maxDate:n.props.maxDate})},n.renderDateInput=function(){var e=n.props.inputElement||a.createElement("input",{type:"text"}),t="string"==typeof n.state.inputValue?n.state.inputValue:n.props.selectDateRange?n.getDateRangeFormat():A(n.state.selectedDate,n.props.dateFormatInput,n.props.locale),o=r("rdx__textInput",n.props.customClassName,e.props.className);return a.cloneElement(e,{ref:function(e){return n.input=e},value:t,onChange:n.handleInputChange,onFocus:n.handleFocus,onBlur:n.handleBlur,onClick:n.handleInputClick,placeholder:n.props.placeholderText,readOnly:n.props.readOnly,disabled:n.props.disabled,className:o})},n.state=n.getInitialState(),n.inputTimeout=null,n}return B(t,e),t.prototype.render=function(){var e=this.renderCalendar(),t=this.state;return a.createElement($.Provider,{value:{selectDateRange:this.props.selectDateRange,locale:this.props.locale,selected:t.selectedDate,viewed:t.viewDate,hoveringDate:t.hoveringDate,startDate:t.selectedDateStart,endDate:t.selectedDateEnd,minDate:this.props.minDate,onDaySelect:this.handleSelect,onDayHover:this.handleDayHover,onTimeSelect:this.handleTimeSelect}},a.createElement(pe,{hidePopper:!this.isCalendarOpen(),popperComponent:e,targetComponent:a.createElement("div",{className:"rdx__input-container"},this.renderDateInput())}))},t}(a.Component);me.propTypes={customClassName:n.string,intervals:n.number,dateFormatCalendar:n.string,dateFormatInput:n.string,dateFormatTime:n.string,locale:n.oneOfType([n.string,n.object]),disabled:n.bool,readOnly:n.bool,inputElement:n.element,onChange:n.func,selected:n.instanceOf(Date),showMonthYearSeparate:n.bool,selectTime:n.bool,selectDateRange:n.bool,selectTimeRange:n.bool,minDate:n.instanceOf(Date),maxDate:n.instanceOf(Date),startDate:n.instanceOf(Date),endDate:n.instanceOf(Date),skipOverflowCheck:n.bool},me.defaultProps={dateFormatCalendar:"LLL yyyy",dateFormatInput:"MM/dd/yyyy",dateFormatTime:"HH:mm",onChange:function(){},skipOverflowCheck:!1},exports.addLocale=function(e,t){var a=j();a.__localeData__||(a.__localeData__={}),a.__localeData__[e]=t},exports.default=me,exports.registerDefaultLocale=function(e){j().__default_locale__=e};
